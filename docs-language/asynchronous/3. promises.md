# Promises

Οι **Promises** είναι ένας σύγχρονος τρόπος διαχείρησης ασύγχρονου κώδικα στην Javascript. Μας επιτρέπουν να οργανώνουμε αλυσιδωτές λειτουργίες και να διαχειριζόμαστε επιτυχίες και αποτυχίες σε ασύγχρονες διαδικασίες, αποφεύγοντας το γνωστό "Callback Hell" που αναφέραμε στην προηγούμενη ενότητα.

## Δημιουργία μιας Promise

Μια **Promise** δημιουργείται μέσω του constructor `promise`, ο οποίος δέχεται μια συνάρτηση με δύο παραμέτρους: `resolve` και `reject`.

```javascript
const myPromise = new Promise((resolve, reject) => {
    const success = true;

    if (success) {
        resolve("Επιτυχία!");
    } else {
        reject("Αποτυχία");
    }
});
```
Η `resolve` καλείται όταν η λειτουργία πετυχαίνει και η `reject` οταν αποτυγχάνει.

## Κατάσταση Promise

Μια **Promise** έχει τρείς δυνατές καταστάσεις:

| Κατάσταση | Περιγραφή                                 |
|-----------|--------------------------------------------|
| `pending` | Η υπόσχεση δεν έχει ακόμη επιλυθεί         |
| `fulfilled` | Η υπόσχεση επιλύθηκε με επιτυχία         |
| `rejected` | Η υπόσχεση απορρίφθηκε λόγω σφάλματος     |

Μόλις φύγει από το `Pending`, η **Promise** "κλειδώνει και δεν αλλάζει ξανά κατάσταση.

## Κατανάλωση Promises

Για να χειριστούμε το αποτέλεσμα μιας **Promise**, χρησιμοποιούμε τις μεθόδους `.then()` και `.catch()`: 

```javascript
myPromise
    .then((message) => {
        console.log("Μήνυμα": message);
    })
    .catch((error) => {
        console.error("Σφάλμα": error);
    });
```
* H `then` καλείται όταν η Promise επιλυθεί επιτυχώς.
* Η `catch` καλείται όταν η Promise απορριφθεί λόγω σφάλματος.

## Αλυσιδωτές Λειτουργίες (Chaining)

Ένα από τα χαρακτηριστικά των **Promises** είναι η δυνατότητα να δημιουργόυμε αλυσίδες ενεργειων. Παράδειγμα: 

```javascript
fetch("https://jsonplaceholder.typicode.com/posts/1")
    .then((response) => response.json())
    .then((data) => {
        console.log("Δεδομένα:", data)
    });
    .catch((error) => {
        cosole.error("Σφάλμα στο fetch:", error);
    });
```
Κάθε `then` επιστρέφει μια νέα Promise, επιτρέποντας συνεχή επεξεργασία δεδομένων.

## Παραδείγματα

* **Promise** με καθυστέρηση 

```javascript
function delay(ms) {
    return new Promise((resolve) => {
        setTimeout(() => resolve(`Έγινε μετά από ${ms}ms`), ms);
    });
}

delay(1000).then((msg) => console.log(msg));
```

* Χειρισμός Σφαλμάτων

```javascript
function riskyOperation() {
    return new Promise((resolve, reject) => {
        const ok = Math.random() > 0.5;
        ok ? resolve("Όλα καλά") : reject("Κάτι πήγε στραβά");
    });
}

riskyOperation()
    .then(console.log)
    .catch(console.error);
```



